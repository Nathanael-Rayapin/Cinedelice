@apiBaseUrl = http://localhost:3000/api
@token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc2MzA0Nzk3NiwiZXhwIjoxNzYzMDUxNTc2fQ.1gsyxvaG0Hl2AYn0uvRIHU5OZiQT36GaLFqeG1JuS4w
# ========================
# AUTHENTIFICATION
# ========================

### Inscription ###
POST {{apiBaseUrl}}/users
Content-Type: application/json

{
  "username": "nib",
  "email": "nib@example.com",
  "password": "Nib12345!",
  "confirm_password": "Nib12345!",
  "age_declaration": true,
  "cgu_accepted": true
}

### Connexion ###
POST {{apiBaseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@example.com",
  "password": "password"
}

### Mon profil ###
GET {{apiBaseUrl}}/auth/me
Authorization: Bearer {{token}}


### Modifier son mot de passe (user ou admin) ###
PATCH {{apiBaseUrl}}/users/me/password/
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "oldPassword": "mehdi",
  "newPassword": "mehdi"
}

### Supprimer son compte ###
DELETE {{apiBaseUrl}}/users/me
Authorization: Bearer {{token}}


# ========================
# ADMIN
# ========================

### Lister tous les utilisateurs (admin) ###
GET {{apiBaseUrl}}/users
Authorization: Bearer {{token}}

### Modifier le rôle d’un utilisateur (admin) ###
PATCH {{apiBaseUrl}}/users/12
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "role": "admin"
}

### Supprimer un utilisateur (admin) ###
DELETE {{apiBaseUrl}}/users/13
Authorization: Bearer {{token}}


# ========================
# CATEGORIES
# ========================

### Lister toutes les catégories ###
GET {{apiBaseUrl}}/categories

### Créer une catégorie (admin) ###
POST {{apiBaseUrl}}/categories
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name":"glace"
}

### Modifier une catégorie (admin) ###
PATCH {{apiBaseUrl}}/categories/
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "glace"
}

### Supprimer une catégorie (admin) ###
DELETE {{apiBaseUrl}}/categories/6
Authorization: Bearer {{token}}

# ========================
# RECIPES
# ========================

### Lister toutes les recettes sauf draft ###
GET {{apiBaseUrl}}/recipes?search=

### Voir une recette par ID sauf draft
GET {{apiBaseUrl}}/recipes/7

### Lister mes recettes ###
GET {{apiBaseUrl}}/recipes/me
Authorization: Bearer {{token}}

### Voir le detail de ma recette ###
GET {{apiBaseUrl}}/recipes/me/6
Authorization: Bearer {{token}}

### Créer une recette (user) ###
POST {{apiBaseUrl}}/recipes
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "galette de nib",
  "category_id":2,
  "movie_title":"jurassic",
  "number_of_person":2,
  "image":"http://example.com/galette.jpg",
  "preparation_time": 40,
  "description": "racletteeeee eeerr   gttttg",
  "ingredients": "fabienPréparer la pâte\nFormer les donuts\nCuire puis décorerfabien poiki",
  "preparation_steps": "roulerPréparer la pâte\nFormer les donuts\nCuire puis décorer",
  "status": "draft"
}

### Modifier n'importe qu'elle recette (admin)  ###
PATCH {{apiBaseUrl}}/recipes/20
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "galette de nib",
  "category_id": 2,
  "movie_title": "jurassic",
  "number_of_person": 2,
  "image":"http://example.com/galette.jpg",
  "preparation_time": 40,
  "description": "raclette raclette raclette\nSucre ",
  "ingredients": "fabienPréparer la pâte\nFormer les donuts\nCuire puis décorer",
  "preparation_steps": "roulerPréparer la pâte\nFormer les donuts\nCuire puis décorer",
  "status": "draft"
}

### Modifier mes recette (admin et user) ###
PATCH {{apiBaseUrl}}/recipes/me/20
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "galette de nib",
  "category_id": 2,
  "movie_title": "jurassic",
  "number_of_person": 2,
  "image":"http://example.com/galette.jpg",
  "preparation_time": 40,
  "description": "raclette raclette raclette\nSucre ",
  "ingredients": "fabienPréparer la pâte\nFormer les donuts\nCuire puis décorer",
  "preparation_steps": "roulerPréparer la pâte\nFormer les donuts\nCuire puis décorer",
  "status": "draft"
}

### Supprimer n'importe quelle recette (admin) ###
DELETE {{apiBaseUrl}}/recipes/8
Authorization: Bearer {{token}}

### Supprimer ma recette (user et admin) ###
DELETE {{apiBaseUrl}}/recipes/me/8
Authorization: Bearer {{token}}
